# Cloudflare Workers Configuration for Laundry Buddy Backend

name = "laundry-buddy-backend"
main = "backend/worker.js"
compatibility_date = "2025-01-01"
node_compat = true

[env.production]
name = "laundry-buddy-backend"
workers_dev = false
route = "https://api.your-domain.com/*"

[env.staging]
name = "laundry-buddy-backend-staging"
workers_dev = true

# Environment variables (set these via Wrangler CLI or Cloudflare dashboard)
# wrangler secret put MONGODB_URI
# wrangler secret put JWT_SECRET

# KV Namespaces (optional, for caching)
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-namespace-id"

# D1 Database (Cloudflare's SQL database - alternative to MongoDB)
# [[d1_databases]]
# binding = "DB"
# database_name = "laundry-buddy-db"
# database_id = "your-database-id"

# Rate limiting (built into Workers)
[limits]
cpu_ms = 50

# Build configuration
[build]
command = "npm install"

[build.upload]
format = "service-worker"
